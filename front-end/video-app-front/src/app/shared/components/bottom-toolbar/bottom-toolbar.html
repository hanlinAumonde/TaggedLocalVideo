<!-- Bottom Toolbar -->
<div class="fixed bottom-0 z-20 mt-5" [style.width]="tableWidth() + 'px'">
  <!-- Toggle Button -->
  <div class="flex justify-center">
    <button
      (click)="toggleToolbar()"
      class="px-6 py-1 bg-neutral-700 dark:bg-neutral-600 hover:bg-neutral-600 dark:hover:bg-neutral-500 text-white rounded-t-lg cursor-pointer transition-colors shadow-lg"
    >
      <mat-icon
        class="transition-transform duration-300"
        [class.rotate-180]="toolbarVisible()"
        fontIcon="keyboard_arrow_up"
      ></mat-icon>
    </button>
  </div>
  <!-- Toolbar Content -->
  <div
    class="overflow-hidden transition-[max-height,opacity] duration-300 ease-in-out"
    [style.max-height]="toolbarVisible() ? '120px' : '0px'"
    [style.opacity]="toolbarVisible() ? '1' : '0'"
  >
    <div class="flex items-center justify-between px-6 py-3 bg-neutral-700 dark:bg-neutral-600 text-white">
      <div class="flex-1 flex items-center">
        <div class="gap-2 flex items-center">
          <button
            mat-icon-button
            (click)="navigateOnClickButton(true)"
            [disabled]="!pathHistoryService.hasHistory()"
          >
            <mat-icon fontIcon="arrow_back"></mat-icon>
          </button>
          <button
            mat-icon-button
            (click)="navigateOnClickButton(false)"
            [disabled]="!pathHistoryService.hasForward()"
          >
            <mat-icon fontIcon="arrow_forward"></mat-icon>
          </button>
        </div>
        <span class="bg-gray-400 dark:bg-neutral-700 mx-4 px-4 py-2 rounded-lg font-medium">Current path:</span>
        <strong class="font-mono text-gray-200 flex items-center">
          @for(pathElement of paths(); track $index) { 
            <span>/</span>
            <span 
              class="bg-neutral-800 px-1 rounded-lg cursor-pointer hover:bg-neutral-700 transition-colors"
              (click)="navigateOnClickPathElement($index)">
              {{pathElement}}
            </span>
          }
        </strong>
      </div>
      <div class="flex items-end gap-4">
        <button
          (click)="openBatchOperationPanel()"
          [disabled]="!hasSelection()"
          class="px-4 py-2
               bg-cyan-500 hover:cursor-pointer hover:bg-cyan-600 disabled:bg-gray-500 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-colors"
        >
          <span class="text-md">Batch ({{ selectedCount() }})</span>
        </button>
      </div>
        
    </div>
  </div>
</div>
